{"version":3,"sources":["index.js"],"names":["player","document","getElementById","stopBtn","recordBtn","downloadLink","handleSuccess","stream","options","mimeType","recordedChunks","mediaRecorder","MediaRecorder","addEventListener","e","data","size","push","disabled","stop","src","URL","createObjectURL","Blob","file","type","metadata","accessToken","gapi","auth","getToken","access_token","headers","form","FormData","append","JSON","stringify","fetch","method","Headers","body","then","res","json","val","console","log","start","navigator","mediaDevices","getUserMedia","audio","video"],"mappings":"AAEA,IAAMA,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AACA,IAAMC,OAAO,GAAGF,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAhB;AACA,IAAME,SAAS,GAAGH,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAlB;AACA,IAAMG,YAAY,GAAGJ,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAArB;;AAEA,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,CAAUC,MAAV,EAAkB;AACtC,MAAMC,OAAO,GAAG;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GAAhB;AACA,MAAIC,cAAc,GAAG,EAArB;AACA,MAAMC,aAAa,GAAG,IAAIC,aAAJ,CAAkBL,MAAlB,EAA0BC,OAA1B,CAAtB;AACAG,EAAAA,aAAa,CAACE,gBAAd,CAA+B,eAA/B,EAAgD,UAAUC,CAAV,EAAa;AAC3D,QAAIA,CAAC,CAACC,IAAF,CAAOC,IAAP,GAAc,CAAlB,EAAqB;AACnBN,MAAAA,cAAc,CAACO,IAAf,CAAoBH,CAAC,CAACC,IAAtB;AACD;AACF,GAJD;AAKAZ,EAAAA,OAAO,CAACU,gBAAR,CAAyB,OAAzB,EAAkC,YAAY;AAC5CT,IAAAA,SAAS,CAACc,QAAV,GAAqB,KAArB;AACAf,IAAAA,OAAO,CAACe,QAAR,GAAmB,IAAnB;AAEAP,IAAAA,aAAa,CAACQ,IAAd;AACD,GALD;AAOAR,EAAAA,aAAa,CAACE,gBAAd,CAA+B,MAA/B,EAAuC,YAAY;AACrD;AACA;AACIb,IAAAA,MAAM,CAACoB,GAAP,GAAaC,GAAG,CAACC,eAAJ,CAAoB,IAAIC,IAAJ,CAASb,cAAT,CAApB,CAAb;AAEA,QAAIc,IAAI,GAAG,IAAID,IAAJ,CAASb,cAAT,EAAyB;AAACe,MAAAA,IAAI,EAAE;AAAP,KAAzB,CAAX;AACA,QAAIC,QAAQ,GAAG;AACX,cAAQ,eADG;AACc;AACzB,kBAAY,YAFD;AAEe;AAC1B,iBAAW,CAAC,mCAAD,CAHA,CAGuC;;AAHvC,KAAf;AAMA,QAAIC,WAAW,GAAGC,IAAI,CAACC,IAAL,CAAUC,QAAV,GAAqBC,YAAvC,CAZiD,CAYI;;AACrD,QAAIC,OAAO,GAAG;AAAE,uBAAiB,YAAYL;AAA/B,KAAd,CAbiD,CAejD;;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEI,QAAIM,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,IAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwB,IAAIZ,IAAJ,CAAS,CAACa,IAAI,CAACC,SAAL,CAAeX,QAAf,CAAD,CAAT,EAAqC;AAACD,MAAAA,IAAI,EAAE;AAAP,KAArC,CAAxB;AACAQ,IAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBX,IAApB;AAEAc,IAAAA,KAAK,oFAAoF;AACvFC,MAAAA,MAAM,EAAE,MAD+E;AAEvFP,MAAAA,OAAO,EAAE,IAAIQ,OAAJ,CAAYR,OAAZ,CAF8E;AAGvFS,MAAAA,IAAI,EAAER;AAHiF,KAApF,CAAL,CAIGS,IAJH,CAIQ,UAACC,GAAD,EAAS;AACf,aAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,KAND,EAMGF,IANH,CAMQ,UAACG,GAAD,EAAS;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KARD;AAUAnC,IAAAA,cAAc,GAAG,EAAjB;AACD,GA/CD;AAiDAN,EAAAA,SAAS,CAACS,gBAAV,CAA2B,OAA3B,EAAoC,YAAY;AAC9CT,IAAAA,SAAS,CAACc,QAAV,GAAqB,IAArB;AACAf,IAAAA,OAAO,CAACe,QAAR,GAAmB,KAAnB;AACAP,IAAAA,aAAa,CAACqC,KAAd;AACD,GAJD;AAKD,CAtED;;AAwEAC,SAAS,CAACC,YAAV,CACGC,YADH,CACgB;AAAEC,EAAAA,KAAK,EAAE,IAAT;AAAeC,EAAAA,KAAK,EAAE;AAAtB,CADhB,EAEGX,IAFH,CAEQpC,aAFR","file":"audio-recorder.e31bb0bc.js","sourceRoot":"..","sourcesContent":["\n\nconst player = document.getElementById(\"player\");\nconst stopBtn = document.getElementById(\"stop\");\nconst recordBtn = document.getElementById(\"record\");\nconst downloadLink = document.getElementById(\"download\");\n\nconst handleSuccess = function (stream) {\n  const options = { mimeType: \"audio/webm\" };\n  let recordedChunks = [];\n  const mediaRecorder = new MediaRecorder(stream, options);\n  mediaRecorder.addEventListener(\"dataavailable\", function (e) {\n    if (e.data.size > 0) {\n      recordedChunks.push(e.data);\n    }\n  });\n  stopBtn.addEventListener(\"click\", function () {\n    recordBtn.disabled = false;\n    stopBtn.disabled = true;\n\n    mediaRecorder.stop();\n  });\n\n  mediaRecorder.addEventListener(\"stop\", function () {\n/*     downloadLink.href = URL.createObjectURL(new Blob(recordedChunks));\n    downloadLink.download = \"acetest.wav\"; */\n    player.src = URL.createObjectURL(new Blob(recordedChunks));\n\n    var file = new Blob(recordedChunks, {type: 'audio/webm'});\n    var metadata = {\n        'name': 'newRecord.wav', // Filename at Google Drive\n        'mimeType': 'audio/webm', // mimeType at Google Drive\n        'parents': ['1YO14HFMAwNKGm92fmmGMq9mFwg8fKUf3'], // Folder ID at Google Drive\n    };\n\n    var accessToken = gapi.auth.getToken().access_token; // Here gapi is used for retrieving the access token.\n    var headers = { 'Authorization': 'Bearer ' + accessToken };\n\n    // create folder if doesn't exist\n    /* var fileMetadata = {\n      'name': 'Invoices',\n      'mimeType': 'application/vnd.google-apps.folder'\n    };\n    var formFolder = new FormData();\n    formFolder.append('metadata', new Blob([JSON.stringify(fileMetadata)], {type: 'application/json'}))\n    fetch(`https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id`, {\n      method: 'POST',\n      headers: new Headers(headers),\n      body: formFolder\n    }).then((res) => {\n      return res.json()\n    }).then(val => {\n      console.log(val)\n    }) */\n\n    var form = new FormData();\n    form.append('metadata', new Blob([JSON.stringify(metadata)], {type: 'application/json'}));\n    form.append('file', file);\n\n    fetch(`https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id`, {\n      method: 'POST',\n      headers: new Headers(headers),\n      body: form\n    }).then((res) => {\n      return res.json();\n    }).then((val) => {\n      console.log(val);\n    })\n    \n    recordedChunks = [];\n  });\n\n  recordBtn.addEventListener(\"click\", function () {\n    recordBtn.disabled = true;\n    stopBtn.disabled = false;\n    mediaRecorder.start();\n  });\n};\n\nnavigator.mediaDevices\n  .getUserMedia({ audio: true, video: false })\n  .then(handleSuccess);"]}